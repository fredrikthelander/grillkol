<div style="width:95%; margin: auto; height: 100%; text-align: center;">

  <!-- Steg 5 Välj produkter-->
  <div *ngIf="step == 5 && this.project">

    <!-- Sticky div -->
    <div class="sticky" (click)="cartClick()">

      <div class="rubrik">

        <!--
        <div *ngIf="db.takeoutType.logo">
          <img class="logo" [src]="'https://cdn.bokad.se/' + db.system + '/logoavh.png'">
        </div>
        -->

        <div style="display: flex; align-items: center;">
      
          <div class="noselect">
            <span>GRILLKOL</span>
          </div>

          <div>
              <fa-layers [fixedWidth]="true" class="carticon">
                <fa-icon [icon]="faShoppingCart"></fa-icon>
                <fa-layers-counter [content]="(selectedItems | totalQuantity : pipeHelper) || '0'" style="font-size: 50px"></fa-layers-counter>
              </fa-layers>
          </div>

        </div>

      </div>

      
    </div>

    <div style="height: 105px"></div>

    
    <div class="info">
      <div [innerHTML]="project.infotext | nl2br | sanitizeHtml"></div>
    </div>
    
    <!-- Kategorier -->
    <div *ngIf="categories.length > 1" class="catdiv">
      <div class="catmobile">
        <div *ngFor="let cat of categories" class="cats" [class.catselected]="selectedCategory == cat" (click)="setCat(cat)">
          <!--{{ cat | ref : "name" : "id" : db.mealtypes }}-->
          {{ cat.displayName || cat.name }}
        </div>
      </div>
    </div>
    
    <!-- Kategoriinfo -->
    <div *ngIf="selectedCategory" class="info" [innerHTML]="selectedCategory.infotext | nl2br | sanitizeHtml"></div>

    <!-- Produkter -->
    <div *ngIf="products.length" class="outer" [class.outer1]="(products | catPipe : selectedCategory.id).length == 1" [class.outer2]="(products | catPipe : selectedCategory.id).length == 2"
         [class.outer3]="(products | catPipe : selectedCategory.id).length == 3">

      <div *ngFor="let p of products | catPipe : selectedCategory.id" class="item noselect">

        <div class="itemrubrik">{{p.name}}</div>
        
        <div class="itemrubriksub">
          <span *ngIf="p.priceIncl">{{p.priceIncl | number : '1.0-0' : 'sv_SE'}} kr</span>
        </div>
        
        <div *ngIf="p.image">
          <img [src]="'/assets/images/products/' + p.image" class="img">
        </div>

        <div class="itemtext" [innerHTML]="(p.description1 || '')  | sanitizeHtml"></div>

        <div style="flex:1"></div>
    
        <div class="itemantal noselect">
          <span class="ri">Antal</span>
          <span class="ri po" (click)="del(p)">-</span>
          <span class="ri">{{ p | itemQuantity : selectedItems : pipeHelper }}</span>
          <span class="po" (click)="add(p)">+</span>
        </div>
        
      </div>
    </div>
    
  </div>

  <div *ngIf="step == 6" style="width: 100%">

    <div class="total">

      <div class="square" style="cursor: pointer;" (click)="close()">
        <fa-icon [icon]="faTimes" size="1x" style="font-size:20px;color: rgb(150, 150, 150)"></fa-icon>
      </div>

      <div style="border-bottom: 10px;">Sammanställning<br>------------------------------<div>

      <!-- Order rows -->
      <div *ngFor="let si of selectedItems" class="row">
        <div style="display: flex; padding: 4px 0; align-items: center">
          <div class="row1">{{ si.quantity }} st {{ si.product.name }}</div>
          <div class="row2"><span *ngIf="si.amount">{{ si.amount | number : '1.0-0' : 'sv_SE' }} kr</span></div>
          <div class="row2 pointer" (click)="delItem(si)"><fa-icon [icon]="faTimes" size="1x" style="font-size:16px;color: rgb(150, 150, 150); padding-left: 8px"></fa-icon></div>
        </div>
      </div>
      
      <!-- Total -->
      <div style="text-align: right;margin-top: 10px; margin-right: 28px">------------------</div>
      <div style="display: flex; justify-content: space-between; margin-right: 28px;">
        <div class="fat">TOTALT</div>
        <div class="fat">{{ selectedItems | totalAmount : pipeHelper | number : '1.0-0' : 'sv_SE' }} kr</div>
      </div>      


    </div>

  </div>

</div>
    

  <!--
  <div style="background-color: white;">
    <pre>{{selectedItems|json}}</pre>
    <pre>{{project|json}}</pre>
    <pre>{{products|json}}</pre>
  </div>
-->
  